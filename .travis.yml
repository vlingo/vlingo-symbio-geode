language: java
dist: trusty

before_install:
  - rm -rf $HOME/.m2/repository/io/vlingo
  - cp .travis/settings.xml $HOME/.m2/settings.xml

script:
  - mvn install

before_cache:
  - rm -rf $HOME/.m2/repository/io/vlingo
cache:
  directories:
    - $HOME/.m2/repository

deploy:
  - provider: script
    script: "mvn deploy -DskipTests"
    skip_cleanup: true
    on:
      tags: true
  - provider: script
    script: "mvn deploy -DskipTests"
    skip_cleanup: true
    on:
      branch: master

notifications:
  slack:
    secure: MLoNyzjE+wWNgi4qbS0CRKrLg8uVa7xrBidEwmVwf+ynhWxRpj8nLbnOm/FNqbFU8ZgWjSR2m7nqGomPQWt1UmWkyIYlaqhGcf78J2N6DlqOQDfGwHwFRDF4D6PIDnXLomGMmjsZTbemHSZa6lYTXRKcZNoNgidlDNsdFAlZlSGh/R7aW5h652yRnzCm881DBuS/7bfIMNjA/N6OL0f7r3MydO/p0YR98/IQtI9eu+9eeUpJy0yBYyQw7Bf45o/nsVHXa+XmqnokSJt9ASLdlwCBvfSvMmFzF0PT1C9TSUESQ45vxOK0ITNW/BO8fQU5UJJ408/OPX2+yNkJJTVVAv+PEdFOxMs7XRvIEKumqxsEqQiJOGLYfX1n/Z9IZarExU/rRnEIzDwkXmT45XomsqEezcvBIuY+A5sMQrNYODfrCT0Hr2A/Pn9hs33Si7e4/P7LLqKHPOfbiT6OdrZGipaFLxBvdykobeERN+MwN9KJ6qj90idUQXu/VjUt306oy4NeeWNXkxpWHuglCzKiXKyYF4AffHF1Q56G7566LEuH6VnfqTjdFTMEDrzverLhVlK14XV4PpLHxPs98UVglCmkLYvSKFRCywgu4KTNyRXfBjMKggvMU5DOKAZCMQT4VA37iMvpzkFJrRnWaSmjAaVgiPzXR90gWgO41buV9XM=
